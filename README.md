# Mini Scheme

This project implements a small interpreter for the `Scheme` language using the ANTLR4 library. The code evaluates Scheme expressions supporting arithmetic operations, logical operations, conditionals, functions, lists, and input/output.

### Compilation

To compile, run:

- ```make```

To execute a program:

- ```python3 scheme.py <program_name.scm>```

The output will be printed to standard output.  
You can redirect input and output using pipes:

- ```python3 scheme.py <program_name.scm> < input.txt > output.txt```

### Features

**Arithmetic operations:** supports addition (+), subtraction (-), multiplication (*), division (/), power (^), and modulus (mod).

**Logical operations:** supports logical operators >, <, =, <>, and, or, not.

**Functions:** you can define functions with the form  
```(define (function arg1 arg2 ...) expr)```  
Functions can be passed as parameters, and higher-order functions are supported.

**Conditionals:** the language includes `if` and `cond` (equivalent to `switch`).

**Lists:** lists are defined with `'(`. Operations such as `car`, `cdr`, `cons`, and empty list checking with `null?` are supported.

**Input and output:** reading from standard input and writing to standard output are supported. Line breaks can be produced with `newline`.

### Brief Explanation of the Code

The main class `EcalVisitor` implements the Visitor pattern, traversing the syntax tree generated by ANTLR and evaluating expressions according to the language rules.  
The evaluator processes expressions, operations, lists, conditionals, and function calls, and it manages context changes using symbol tables: `ts` for local variables and `tfs` for defined functions.

### Explanation of Test Suites

All test suites are intended to be executed as:

- ```python3 scheme.py <testX.scm> < <testX.inp>```

You can see an example of the expected output in the corresponding `.out` file of each test.

**Test suite `prova1.scm`:** factorial function showing that the interpreter supports recursion. It also demonstrates the `let` construct for defining local variables and proper handling of unusual characters in strings and comments.

**Test suite `prova2.scm`:** implements the higher-order function `foldl`. It shows the use of higher-order functions and constant definitions. It also demonstrates list operations and how comments are ignored by the interpreter.

**Test suite `prova3.scm`:** function that returns whether a number is even or odd. It illustrates nested functions and the correct behavior of `cond`. It also shows that function names may include characters such as "-" or "?".

**Test suite `prova4.scm`:** program that performs various list operations using `car`, `cons`, and `cdr`, printing the different results.

**Test suite `prova5.scm`:** program that computes the parity of two numbers. It shows correct behavior of `cond` and the logical operators `and` and `or`. It also demonstrates proper use of standard output and the `newline` instruction.
